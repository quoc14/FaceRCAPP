<h2>🧾 Nhập điểm tổng kết tháng</h2>

<form method="get">
    Lớp:
    <select name="class_id">
        {% for cls in classes %}
            <option value="{{ cls.id }}" {% if cls.id == class_id %}selected{% endif %}>{{ cls.name }}</option>
        {% endfor %}
    </select>
    Tháng:
    <input type="text" name="month" value="{{ month }}">
    <button type="submit">Xem</button>
</form>

{% if summary_data %}
<form method="post">
    {% csrf_token %}
    <table border="1" cellpadding="6">
        <tr>
            <th>STT</th><th>Mã HS</th><th>Họ tên</th><th>KTT</th><th>Voucher</th><th>Chuyên cần</th><th>Tổng kết</th>
        </tr>
        {% for row in summary_data %}
        <tr>
            <td>{{ forloop.counter }}</td>
            <td>{{ row.student.student_code }}</td>
            <td>{{ row.student.name }}</td>
            <td><input type="number" step="0.01" min="0" max="10" name="ktt_{{ row.student.id }}" value="{{ row.summary.ktt_score }}"></td>
            <td><input type="number" step="0.01" min="0" max="10"  name="voucher_{{ row.student.id }}" value="{{ row.summary.voucher_score }}"></td>
            <td><input type="number" step="0.01" min="0" max="10" name="diligence_{{ row.student.id }}" value="{{ row.suggested_diligence }}"></td>
            <td>{{ row.summary.final_score }}</td>
        </tr>
        {% endfor %}
    </table>
    <br>
    <button type="submit">💾 Lưu điểm tổng kết</button>
    
</form>
{% endif %}
<p><a href="{% url 'teacher_dashboard' %}">⬅️ Quay lại</a></p>